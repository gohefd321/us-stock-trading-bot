# ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

## ğŸ— ì „ì²´ êµ¬ì¡°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ì‚¬ìš©ì (WebUI)                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚ HTTP/WebSocket
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  React í”„ë¡ íŠ¸ì—”ë“œ (Vite)                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚Dashboard â”‚ Trading  â”‚Portfolio â”‚ Signals  â”‚ Settings  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚ REST API
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  FastAPI ë°±ì—”ë“œ (Python)                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              API Routes (5ê°œ)                        â”‚  â”‚
â”‚  â”‚  /scheduler â”‚ /trading â”‚ /portfolio â”‚ /signals â”‚     â”‚  â”‚
â”‚  â”‚             /settings                                 â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚           â”‚                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚           ì„œë¹„ìŠ¤ ë ˆì´ì–´ (10ê°œ ì„œë¹„ìŠ¤)               â”‚   â”‚
â”‚  â”‚  â€¢ TradingEngine      â€¢ GeminiService               â”‚   â”‚
â”‚  â”‚  â€¢ SchedulerService   â€¢ RiskManager                 â”‚   â”‚
â”‚  â”‚  â€¢ PortfolioManager   â€¢ SignalAggregator            â”‚   â”‚
â”‚  â”‚  â€¢ BrokerService      â€¢ WSBScraper                  â”‚   â”‚
â”‚  â”‚  â€¢ YahooFinance       â€¢ TipRanks                    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚           â”‚                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚         Gemini Function Calling (8ê°œ í•¨ìˆ˜)          â”‚   â”‚
â”‚  â”‚  check_balance â”‚ get_price â”‚ execute_trade â”‚ ...    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚                      â”‚                â”‚
    â–¼                      â–¼                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚SQLite â”‚          â”‚ì™¸ë¶€ APIë“¤  â”‚    â”‚Google Gemini â”‚
â”‚  DB   â”‚          â”‚â€¢ í•œíˆ¬ì¦ê¶Œ  â”‚    â”‚   2.0 Flash  â”‚
â”‚       â”‚          â”‚â€¢ Reddit   â”‚    â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚â€¢ Yahoo    â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚â€¢ TipRanks â”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“¦ ë°±ì—”ë“œ ì•„í‚¤í…ì²˜

### ë ˆì´ì–´ êµ¬ì¡°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         API Routes (Endpoints)          â”‚  â† HTTP ìš”ì²­ ì²˜ë¦¬
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚         Services (ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§)         â”‚  â† í•µì‹¬ ë¡œì§
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚         Models (ë°ì´í„°ë² ì´ìŠ¤)            â”‚  â† ORM ëª¨ë¸
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚         Database (SQLite)               â”‚  â† ë°ì´í„° ì €ì¥
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### í•µì‹¬ ì„œë¹„ìŠ¤

#### 1. TradingEngine (ê±°ë˜ ì—”ì§„)
**ì±…ì„**: ì „ì²´ ê±°ë˜ ì›Œí¬í”Œë¡œìš° ì´ê´„
```python
execute_trading_session(decision_type):
    1. ë¦¬ìŠ¤í¬ ì²´í¬ (can_trade_now)
    2. í¬íŠ¸í´ë¦¬ì˜¤ ìƒíƒœ ì¡°íšŒ
    3. ì‹œì¥ ì‹ í˜¸ ìˆ˜ì§‘
    4. Gemini AI ê²°ì • ìš”ì²­
    5. ê±°ë˜ ì‹¤í–‰
    6. ê²°ê³¼ ë¡œê¹…
    7. ìŠ¤ëƒ…ìƒ· ì €ì¥
```

#### 2. GeminiService (AI ì—”ì§„)
**ì±…ì„**: Gemini AIì™€ í†µì‹  ë° Function Calling
```python
make_trading_decision(decision_type, portfolio, signals):
    1. í”„ë¡¬í”„íŠ¸ ìƒì„± (decision_typeë³„)
    2. Gemini API í˜¸ì¶œ
    3. Function Calling ë°˜ë³µ ì²˜ë¦¬ (ìµœëŒ€ 10íšŒ)
    4. í•¨ìˆ˜ ì‹¤í–‰ ê²°ê³¼ë¥¼ Geminiì— ì „ë‹¬
    5. ìµœì¢… ê²°ì • íŒŒì‹±
```

**í”„ë¡¬í”„íŠ¸ ì „ëµ**:
- PRE_MARKET: ë§¤ìˆ˜ ê¸°íšŒ ë¶„ì„ (íŠ¸ë Œë”© ì¢…ëª© ì¤‘ì‹¬)
- MID_SESSION: ê¸°ì¡´ í¬ì§€ì…˜ ì ê²€ ë° ì¡°ì •
- PRE_CLOSE: ìˆ˜ìµ ì‹¤í˜„ ë° ì²­ì‚° íŒë‹¨

#### 3. SchedulerService (ìŠ¤ì¼€ì¤„ëŸ¬)
**ì±…ì„**: ìë™ ê±°ë˜ ì„¸ì…˜ ìŠ¤ì¼€ì¤„ë§
```python
start():
    - PRE_MARKET ì„¸ì…˜ (23:20/22:20 KST)
    - MID_SESSION ì„¸ì…˜ (01:30/00:30 KST)
    - PRE_CLOSE ì„¸ì…˜ (05:50/04:50 KST)
    - Stop-loss ì²´í¬ (30ë¶„ë§ˆë‹¤)
    - ì¼ì¼ ìŠ¤ëƒ…ìƒ· (06:05 KST)
```

#### 4. RiskManager (ë¦¬ìŠ¤í¬ ê´€ë¦¬)
**ì±…ì„**: ëª¨ë“  ê±°ë˜ ì „ ë¦¬ìŠ¤í¬ ê²€ì¦
```python
check_position_size_limit(ticker, value):
    â†’ ìµœëŒ€ 40% ì œí•œ ê²€ì¦

check_daily_loss_limit():
    â†’ -20% ì„œí‚·ë¸Œë ˆì´ì»¤ ê²€ì¦

check_stop_loss(ticker, price):
    â†’ -30% stop-loss ê²€ì¦

calculate_position_size(ticker, confidence, price):
    â†’ ì‹ ë¢°ë„ ê¸°ë°˜ ìµœì  í¬ì§€ì…˜ ê³„ì‚°
```

#### 5. SignalAggregator (ì‹ í˜¸ ì§‘ê³„)
**ì±…ì„**: 3ê°œ ì†ŒìŠ¤ì˜ ì‹œì¥ ì‹ í˜¸ í†µí•©
```python
aggregate_signals_for_ticker(ticker):
    # ë³‘ë ¬ë¡œ ì‹ í˜¸ ìˆ˜ì§‘
    wsb_signal = wsb_scraper.get_ticker_sentiment(ticker)
    yahoo_signal = yahoo_service.get_ticker_data(ticker)
    tipranks_signal = tipranks_service.get_ticker_analysis(ticker)

    # ê°€ì¤‘ í‰ê·  ê³„ì‚°
    composite_sentiment = (
        wsb_signal * 0.3 +
        yahoo_signal * 0.4 +
        tipranks_signal * 0.3
    )

    # ì¶”ì²œ ìƒì„±
    recommendation = generate_recommendation(composite_sentiment, strength)
```

#### 6. PortfolioManager (í¬íŠ¸í´ë¦¬ì˜¤ ê´€ë¦¬)
**ì±…ì„**: í¬íŠ¸í´ë¦¬ì˜¤ ìƒíƒœ ì¶”ì 
```python
get_current_state():
    - í˜„ê¸ˆ ì”ê³ 
    - ë³´ìœ  í¬ì§€ì…˜
    - ì¼ì¼ P/L
    - ì´ P/L
    - í¬ì§€ì…˜ë³„ ë…¸ì¶œë„

save_snapshot():
    - ì¼ì¼ í¬íŠ¸í´ë¦¬ì˜¤ ìŠ¤ëƒ…ìƒ· ì €ì¥
```

#### 7. BrokerService (ë¸Œë¡œì»¤ ì—°ë™)
**ì±…ì„**: í•œêµ­íˆ¬ìì¦ê¶Œ API ë˜í¼
```python
get_balance() â†’ ê³„ì¢Œ ì”ê³ 
get_us_stock_price(ticker) â†’ ì‹¤ì‹œê°„ ê°€ê²©
place_us_order(ticker, action, quantity) â†’ ì£¼ë¬¸ ì‹¤í–‰
get_us_positions() â†’ ë³´ìœ  í¬ì§€ì…˜
```

### Gemini Function Calling

AIê°€ ì§ì ‘ í˜¸ì¶œ ê°€ëŠ¥í•œ 8ê°œ í•¨ìˆ˜:

| í•¨ìˆ˜ëª… | ì„¤ëª… | ë¦¬í„´ |
|--------|------|------|
| `check_balance()` | ê³„ì¢Œ ì”ê³  ì¡°íšŒ | {cash, total_value} |
| `get_current_price(ticker)` | ì‹¤ì‹œê°„ ì£¼ê°€ | {ticker, price} |
| `get_portfolio_status()` | í¬íŠ¸í´ë¦¬ì˜¤ ì „ì²´ ìƒíƒœ | {positions, pnl, exposure} |
| `execute_trade(...)` | ì‹¤ì œ ë§¤ë§¤ ì‹¤í–‰ | {success, order_id} |
| `analyze_signals(ticker)` | ì‹œì¥ ì‹ í˜¸ ë¶„ì„ | {wsb, yahoo, tipranks, recommendation} |
| `calculate_position_size(...)` | í¬ì§€ì…˜ í¬ê¸° ê³„ì‚° | {quantity, trade_value, reasoning} |
| `check_stop_loss_triggers()` | Stop-loss ì²´í¬ | {triggered_positions[]} |
| `get_trading_history(days)` | ê±°ë˜ ë‚´ì—­ ì¡°íšŒ | {trades[], win_rate} |

### ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ

```sql
-- 6ê°œ í…Œì´ë¸”

api_keys (id, key_name, encrypted_value, is_active)
  â†“ ì•”í˜¸í™”ëœ API í‚¤ ì €ì¥

trades (id, ticker, action, quantity, price, status, llm_decision_id)
  â†“ ëª¨ë“  ê±°ë˜ ê¸°ë¡

llm_decisions (id, decision_type, prompt, response, reasoning,
              confidence_score, function_calls, signals_used,
              portfolio_state)
  â†“ AI ê²°ì • ë¡œê·¸ (ê°ì‚¬ ì¶”ì )

signals (id, ticker, source, signal_type, sentiment_score,
        confidence, metadata)
  â†“ ì‹œì¥ ì‹ í˜¸ íˆìŠ¤í† ë¦¬

portfolio_snapshots (id, snapshot_date, cash_balance,
                    total_holdings_value, total_value,
                    daily_pnl, total_pnl, holdings_json)
  â†“ ì¼ì¼ í¬íŠ¸í´ë¦¬ì˜¤ ìŠ¤ëƒ…ìƒ·

user_preferences (id, key, value)
  â†“ ì‚¬ìš©ì ì„¤ì •
```

## ğŸ¨ í”„ë¡ íŠ¸ì—”ë“œ ì•„í‚¤í…ì²˜

### ê¸°ìˆ  ìŠ¤íƒ
- **React 18**: UI ë¼ì´ë¸ŒëŸ¬ë¦¬
- **TypeScript**: íƒ€ì… ì•ˆì •ì„±
- **Vite**: ë¹Œë“œ ë„êµ¬
- **Material-UI**: UI ì»´í¬ë„ŒíŠ¸
- **Recharts**: ì°¨íŠ¸ ì‹œê°í™”
- **Axios**: HTTP í´ë¼ì´ì–¸íŠ¸
- **React Router**: ë¼ìš°íŒ…

### í˜ì´ì§€ êµ¬ì¡°

```
/                 â†’ Dashboard (ëŒ€ì‹œë³´ë“œ)
  - í¬íŠ¸í´ë¦¬ì˜¤ ìš”ì•½ (4ê°œ ì¹´ë“œ)
  - ìŠ¤ì¼€ì¤„ëŸ¬ ì œì–´
  - ë³´ìœ  í¬ì§€ì…˜ ë¦¬ìŠ¤íŠ¸
  - ë¦¬ìŠ¤í¬ ê²½ê³ 

/trading          â†’ Trading (ê±°ë˜ ê´€ë¦¬)
  - AI ê²°ì • ë¡œê·¸ (í…Œì´ë¸”)
  - ê±°ë˜ ë‚´ì—­ (í…Œì´ë¸”)
  - ê²°ì • ìƒì„¸ ë‹¤ì´ì–¼ë¡œê·¸

/portfolio        â†’ Portfolio (í¬íŠ¸í´ë¦¬ì˜¤)
  - ìì‚° ì¶”ì´ ì°¨íŠ¸ (30ì¼)
  - ì¼ë³„ í†µê³„ ì¹´ë“œ

/signals          â†’ Signals (ì‹œì¥ ì‹ í˜¸)
  - ì¢…ëª© ë¶„ì„ ê²€ìƒ‰
  - WallStreetBets íŠ¸ë Œë”© (20ê°œ)
  - ì‹ í˜¸ ìƒì„¸ (WSB/Yahoo/TipRanks)

/settings         â†’ Settings (ì„¤ì •)
  - API í‚¤ ê´€ë¦¬
  - ë¦¬ìŠ¤í¬ íŒŒë¼ë¯¸í„° ì¡°íšŒ
```

### API í´ë¼ì´ì–¸íŠ¸ êµ¬ì¡°

```typescript
// services/api.ts

schedulerApi:
  - getStatus()
  - start()
  - stop()
  - executeSession(type)

portfolioApi:
  - getStatus()
  - getHistory(days)
  - getPosition(ticker)
  - saveSnapshot()

tradingApi:
  - analyzeTicker(ticker)
  - getHistory(days)
  - getDecisions(limit)
  - getDecisionDetail(id)

signalsApi:
  - getTrending(limit)
  - getTickerSignals(ticker)
  - getRecent(hours, limit)

settingsApi:
  - getApiKeys()
  - saveApiKey(name, value)
  - deleteApiKey(name)
  - getRiskParams()
```

## ğŸ”„ ê±°ë˜ ì›Œí¬í”Œë¡œìš°

### ìë™ ê±°ë˜ ì„¸ì…˜ í”Œë¡œìš°

```
1. Scheduler Trigger (ì˜ˆ: 23:20 KST)
   â†“
2. TradingEngine.execute_trading_session('PRE_MARKET')
   â†“
3. RiskManager.can_trade_now()
   â†’ ì„œí‚·ë¸Œë ˆì´ì»¤ ì²´í¬
   â†“
4. PortfolioManager.get_current_state()
   â†’ í˜„ì¬ í¬íŠ¸í´ë¦¬ì˜¤ ì¡°íšŒ
   â†“
5. SignalAggregator.aggregate_signals()
   â†’ WSB íŠ¸ë Œë”© top 10 ë¶„ì„
   â†“
6. GeminiService.make_trading_decision()
   â”œâ”€ í”„ë¡¬í”„íŠ¸ ìƒì„± (PRE_MARKETìš©)
   â”œâ”€ Gemini API í˜¸ì¶œ
   â”œâ”€ Function Calling ë£¨í”„:
   â”‚  â”œâ”€ AIê°€ check_balance() í˜¸ì¶œ
   â”‚  â”œâ”€ AIê°€ analyze_signals('AAPL') í˜¸ì¶œ
   â”‚  â”œâ”€ AIê°€ calculate_position_size() í˜¸ì¶œ
   â”‚  â”œâ”€ AIê°€ execute_trade('AAPL', 'BUY', 5) í˜¸ì¶œ
   â”‚  â””â”€ ... (ìµœëŒ€ 10íšŒ ë°˜ë³µ)
   â””â”€ ìµœì¢… ê²°ì • íŒŒì‹±
   â†“
7. LLMDecision ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥
   â†’ ê°ì‚¬ ì¶”ì ìš©
   â†“
8. PortfolioManager.save_snapshot()
   â†’ ì„¸ì…˜ í›„ ìŠ¤ëƒ…ìƒ·
```

### Stop-Loss ìë™ ì‹¤í–‰ í”Œë¡œìš°

```
1. Scheduler Trigger (30ë¶„ë§ˆë‹¤)
   â†“
2. TradingEngine.check_and_execute_stop_losses()
   â†“
3. RiskManager.check_all_stop_losses()
   â†’ ëª¨ë“  í¬ì§€ì…˜ -30% ì²´í¬
   â†“
4. íŠ¸ë¦¬ê±°ëœ í¬ì§€ì…˜ë³„:
   RiskManager.execute_stop_loss_sell(ticker, quantity)
   â†“
5. BrokerService.place_us_order(ticker, 'SELL', quantity, 'MARKET')
   â†“
6. ê²°ê³¼ ë¡œê¹…
```

## ğŸ” ë³´ì•ˆ ì•„í‚¤í…ì²˜

### API í‚¤ ì•”í˜¸í™”
```python
EncryptionService (Fernet ëŒ€ì¹­ ì•”í˜¸í™”)
  â†“
encryption_key (data/encryption.key, 0o600 ê¶Œí•œ)
  â†“
encrypted_value (ë°ì´í„°ë² ì´ìŠ¤ ì €ì¥)
```

### ì ‘ê·¼ ì œì–´
- `.env` íŒŒì¼: gitì—ì„œ ì œì™¸
- `encryption.key`: 0o600 ê¶Œí•œ (ì†Œìœ ìë§Œ ì½ê¸°/ì“°ê¸°)
- API í‚¤: ë°ì´í„°ë² ì´ìŠ¤ì— ì•”í˜¸í™” ì €ì¥
- WebUI: API í‚¤ëŠ” ë§ˆìŠ¤í‚¹ í‘œì‹œ (`***...`)

## ğŸ“Š ëª¨ë‹ˆí„°ë§ ë° ë¡œê¹…

### ë¡œê·¸ íŒŒì¼ (logs/)
- `app.log`: ì „ì²´ ì• í”Œë¦¬ì¼€ì´ì…˜ ë¡œê·¸
- `trading.log`: ê±°ë˜ ì‹¤í–‰ ë¡œê·¸
- `gemini.log`: AI ê²°ì • ë¡œê·¸
- `scheduler.log`: ìŠ¤ì¼€ì¤„ëŸ¬ ì‘ì—… ë¡œê·¸
- `errors.log`: ì—ëŸ¬ë§Œ ìˆ˜ì§‘

### ë¡œê·¸ ë ˆë²¨
- DEBUG: ê°œë°œìš© ìƒì„¸ ì •ë³´
- INFO: ì¼ë°˜ ì‘ì—… ì •ë³´
- WARNING: ê²½ê³  (stop-loss íŠ¸ë¦¬ê±° ë“±)
- ERROR: ì˜¤ë¥˜ ë°œìƒ
- CRITICAL: ì„œí‚·ë¸Œë ˆì´ì»¤ ë°œë™ ë“±

### ë¡œê·¸ ë¡œí…Œì´ì…˜
- ìµœëŒ€ íŒŒì¼ í¬ê¸°: 10MB
- ë°±ì—… íŒŒì¼ ìˆ˜: 5-10ê°œ
- ìë™ ì••ì¶• ë° ìˆœí™˜

## ğŸš€ ë°°í¬ ì•„í‚¤í…ì²˜

### ê°œë°œ í™˜ê²½
```
Mac localhost:
  - Backend: uvicorn (1 worker)
  - Frontend: vite dev server
  - Database: SQLite (data/trading_bot.db)
```

### í”„ë¡œë•ì…˜ í™˜ê²½
```
Mac localhost (caffeinateë¡œ ìŠ¬ë¦½ ë°©ì§€):
  - Backend: uvicorn (2 workers)
  - Frontend: static build (dist/)
  - Database: SQLite + ì¼ì¼ ë°±ì—…
  - Scheduler: APScheduler (ìë™ ê±°ë˜)
```

### í–¥í›„ í™•ì¥ ê°€ëŠ¥ì„±
```
Linux Server:
  - Backend: Gunicorn + Uvicorn workers
  - Frontend: Nginx ì •ì  ì„œë¹™
  - Database: PostgreSQL
  - Cache: Redis
  - Queue: Celery
  - Container: Docker
```

## ğŸ“ˆ ì„±ëŠ¥ ìµœì í™”

### ë°±ì—”ë“œ
- **ë¹„ë™ê¸° I/O**: asyncio, aiohttp, aiosqlite
- **ë³‘ë ¬ ì‹ í˜¸ ìˆ˜ì§‘**: asyncio.gather()
- **ë°ì´í„°ë² ì´ìŠ¤ ì¸ë±ìŠ¤**: ticker, created_at, snapshot_date
- **ì»¤ë„¥ì…˜ í’€**: SQLAlchemy AsyncEngine

### í”„ë¡ íŠ¸ì—”ë“œ
- **ì½”ë“œ ë¶„í• **: React.lazy() (í–¥í›„)
- **Vite ë²ˆë“¤ë§**: ìµœì í™”ëœ í”„ë¡œë•ì…˜ ë¹Œë“œ
- **API í´ë§ ê°„ê²©**: ëŒ€ì‹œë³´ë“œ 10ì´ˆ, ê±°ë˜ 30ì´ˆ, ì‹ í˜¸ 60ì´ˆ

### ë„¤íŠ¸ì›Œí¬
- **HTTP/2**: uvicorn ì§€ì›
- **ì••ì¶•**: gzip ì‘ë‹µ
- **ìºì‹±**: ì •ì  íŒŒì¼ ë¸Œë¼ìš°ì € ìºì‹±

## ğŸ§ª í…ŒìŠ¤íŠ¸ ì „ëµ

### ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ (pytest)
- ê° ì„œë¹„ìŠ¤ ê°œë³„ í…ŒìŠ¤íŠ¸
- Mock ë¸Œë¡œì»¤ ì‚¬ìš©
- ê²©ë¦¬ëœ ë°ì´í„°ë² ì´ìŠ¤

### í†µí•© í…ŒìŠ¤íŠ¸
- Gemini function calling í…ŒìŠ¤íŠ¸
- ì „ì²´ ê±°ë˜ ì›Œí¬í”Œë¡œìš° í…ŒìŠ¤íŠ¸
- API ì—”ë“œí¬ì¸íŠ¸ í…ŒìŠ¤íŠ¸ (httpx)

### ìˆ˜ë™ í…ŒìŠ¤íŠ¸
- WebUI ì „ì²´ í”Œë¡œìš°
- API ë¬¸ì„œ (/docs)ì—ì„œ ì§ì ‘ í˜¸ì¶œ
- ë¡œê·¸ íŒŒì¼ ê²€ì¦

---

ì´ ì•„í‚¤í…ì²˜ëŠ” í™•ì¥ ê°€ëŠ¥í•˜ê³  ìœ ì§€ë³´ìˆ˜ê°€ ìš©ì´í•˜ë„ë¡ ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤.
